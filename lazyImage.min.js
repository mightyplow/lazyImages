(function(e){function u(e){return Array.prototype.slice.call(e)}function l(e){return e instanceof HTMLImageElement?a:e instanceof HTMLPictureElement?f:null}function c(e){e.forEach(function(e){var t=e.target,n=l(t);n.restoreSource(t),p.unobserve(t)})}function h(e,t){return e.reduce(function(e,n){var r=u(n.addedNodes||[]);return r.forEach(function(n){n instanceof HTMLElement&&(n.matches(t)&&e.add(n),n.querySelectorAll(t).forEach(function(t){e.add(t)}))}),e},new r)}var t="MutationObserver"in e&&e.MutationObserver,n="IntersectionObserver"in e&&e.IntersectionObserver,r="Set"in e&&e.Set;if(!(t&&n&&r))return;var i="data-src",s={threshold:0},o={childList:!0,subtree:!0,attributeFilter:["src","srcset"]},a=function(){var e="src";return{storeSource:function(t){t.setAttribute(i,t.getAttribute(e)),t.removeAttribute(e)},restoreSource:function(t){t.setAttribute(e,t.getAttribute(i)),t.removeAttribute(i)},hasSource:function(t){return!!t.getAttribute(e)}}}(),f=function(){var e="srcset";return{storeSource:function(t){t.querySelectorAll("source").forEach(function(t){t.setAttribute(i,t.getAttribute(e)),t.removeAttribute(e)})},restoreSource:function(t){t.querySelectorAll("source").forEach(function(t){t.setAttribute(e,t.getAttribute(i)),t.removeAttribute(i)})},hasSource:function(t){return u(t.querySelectorAll("source")).every(function(t){return!!t.getAttribute(e)})}}}(),p=new n(c,s),d=new t(function(e){var t=h(e,"img, picture");t.forEach(function(e){var t=l(e);t&&t.hasSource(e)&&(t.storeSource(e),p.observe(e))})});d.observe(document,o)})(window);