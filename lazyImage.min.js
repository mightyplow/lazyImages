!function(){function e(e){e.forEach(function(e){var t=e.target,n=r(t);n.restoreSource(t),a.unobserve(t)})}function t(e){return Array.prototype.slice.call(e)}function r(e){return e instanceof HTMLImageElement?i:e instanceof HTMLPictureElement?s:null}function n(e,t){return e.reduce(function(e,r){if(r.addedNodes){var n=Array.prototype.slice.call(r.addedNodes);n.forEach(function(r){r instanceof HTMLElement&&(r.matches(t)&&e.add(r),r.querySelectorAll(t).forEach(function(t){e.add(t)}))})}return e},new Set)}if(MutationObserver&&IntersectionObserver&&Set){var o="data-src",u={threshold:0},c={childList:!0,subtree:!0,attributeFilter:["src","srcset"]},i=function(){var e="src";return{storeSource:function(t){t.setAttribute(o,t.getAttribute(e)),t.removeAttribute(e)},restoreSource:function(t){t.setAttribute(e,t.getAttribute(o)),t.removeAttribute(o)},hasSource:function(t){return!!t.getAttribute(e)}}}(),s=function(){var e="srcset";return{storeSource:function(t){var r=t.querySelectorAll("source");r.forEach(function(t){t.setAttribute(o,t.getAttribute(e)),t.removeAttribute(e)})},restoreSource:function(t){var r=t.querySelectorAll("source");r.forEach(function(t){t.setAttribute(e,t.getAttribute(o)),t.removeAttribute(o)})},hasSource:function(r){var n=t(r.querySelectorAll("source"));return n.every(function(t){return!!t.getAttribute(e)})}}}(),a=new IntersectionObserver(e,u),f=new MutationObserver(function(e){var t=n(e,"img, picture");t.forEach(function(e){var t=r(e);t.hasSource(e)&&(t.storeSource(e),a.observe(e))})});f.observe(document.body,c)}}();
