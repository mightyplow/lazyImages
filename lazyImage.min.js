(function(t,e){var n=t["MutationObserver"],r=t["IntersectionObserver"],i=t["Set"];if(!(n&&r&&i)){return}var u="data-";var c={threshold:0};var o={childList:true,subtree:true};function s(t){return t&&Array.prototype.slice.call(t)||[]}function a(t,e,n){t.setAttribute(n,t.getAttribute(e));t.removeAttribute(e)}function f(t,e){t.forEach(e)}var d={a:function(){return u+this.b},c:function(t,e,n){f(this.d(t),function(t){a(t,e,n)})},e:function(t){this.c(t,this.b,this.a())},f:function(t){this.c(t,this.a(),this.b)}};var v=e.assign({},d,{b:"src",d:function(t){return[t]}});var l=e.assign({},d,{b:"srcset",d:function(t){return s(t.querySelectorAll("source"))}});function b(t){if(t instanceof HTMLImageElement){return v}else if(t instanceof HTMLPictureElement){return l}return null}function h(t){f(t,function(t){var e=t.target,n=b(e);n.f(e);g.unobserve(e)})}function m(t,e){return t.reduce(function(t,n){var r=s(n.addedNodes||[]);f(r,function(n){if(n.matches){if(n.matches(e)){t.add(n)}f(n.querySelectorAll(e),t.add.bind(t))}});return t},new i)}var g=new r(h,c);var A=new n(function(t){console.time("mutations");var e=m(t,"img, picture");f(e,function(t){var e=b(t);if(e){e.e(t);g.observe(t)}});console.timeEnd("mutations")});A.observe(document,o)})(window,Object);
